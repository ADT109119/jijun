// ç‰ˆæœ¬æ›´æ–°æ—¥èªŒæ¨¡çµ„
export const CHANGELOG = {
  "2.1.0.1": {
    date: "2025-11-03",
    title: "ä¿®å¾©é¦–é çš„æ”¶æ”¯è¨ˆç®—æ™‚é–“ç¯„åœéŒ¯èª¤",
    features: [
    ],
    bugfixes: [
      "ä¿®å¾©é¦–é çš„æ”¶æ”¯è¨ˆç®—æ™‚é–“ç¯„åœéŒ¯èª¤",
      "ä¿®æ­£è¨˜å¸³é é¢æ—¥æœŸé¸æ“‡å™¨åœ¨æ¯æ—¥8é»å‰é è¨­æœƒé¸å‰ä¸€å¤©çš„å•é¡Œ"
    ],
    improvements: [
      "èª¿æ•´é¦–é çš„å¹´æœˆé¸æ“‡å™¨æ¨£å¼ï¼Œä½¿å…¶æ›´æ˜“æ–¼ä½¿ç”¨"
    ]
  },
  "2.1.0": {
    date: "2025-11-02",
    title: "ä»‹é¢é‡ç½®",
    features: [
      "åŒ¯å‡º/åŒ¯å…¥åŠŸèƒ½å¢å¼·ï¼Œç¾åœ¨æœƒå®Œæ•´åŒ…å«è‡ªè¨‚çš„åˆ†é¡"
    ],
    bugfixes: [
    ],
    improvements: [
      "é é¢é‡ç½®ï¼Œå°‡æ•´å€‹ä»‹é¢é‡æ–°è¨­è¨ˆä»¥æå‡ä½¿ç”¨é«”é©—",
    ]
  },
  "2.0.7.6": {
    date: "2025-08-24",
    title: "ä¿®å¾©é¦–é æ”¯å‡ºåˆ†æåœ–ä¸­å¿ƒé‡‘é¡ä¸é¡¯ç¤ºçš„éŒ¯èª¤",
    features: [
    ],
    bugfixes: [
      "ä¿®æ”¹æ–‡å­—ç¹ªè£½æ–¹æ³•ï¼Œä¿®å¾©é¦–é æ”¯å‡ºåˆ†æåœ–ä¸­å¿ƒé‡‘é¡ä¸é¡¯ç¤ºçš„éŒ¯èª¤"
    ],
    improvements: [
    ]
  },
  "2.0.7.5": {
    date: "2025-08-02",
    title: "æ˜ç´°é é¢å„ªåŒ–ï¼šé¡åˆ¥ç¯©é¸èˆ‡é …ç›®é¡¯ç¤º",
    features: [
    ],
    bugfixes: [
    ],
    improvements: [
      "æ˜ç´°é é¢é¡åˆ¥ç¯©é¸é¡¯ç¤ºæ™‚é–“ç¯„åœé‡‘é¡ä¸¦æ¨™è¨»æ”¶æ”¯",
      "æ˜ç´°é …ç›®åœ–ç¤ºèƒŒæ™¯åœ“å½¢åŒ–ä¸¦ä½¿ç”¨é¡åˆ¥é¡è‰²",
      "è‡ªè¡Œæ–°å¢çš„è¨˜å¸³åˆ†é¡ï¼Œç¾åœ¨å¯ä»¥å†é€²è¡Œç·¨è¼¯"
    ]
  },
  "2.0.7.4": {
    date: "2024-07-31",
    title: "æ˜ç´°é é¢æ·»åŠ é¡åˆ¥ç¯©é¸",
    features: [
      "æ˜ç´°é é¢æ–°å¢é¡åˆ¥ç¯©é¸åŠŸèƒ½",
    ],
    bugfixes: [
    ],
    improvements: [
    ]
  },
  "2.0.7.3": {
    date: "2024-07-19",
    title: "æ—¥æœŸåŠŸèƒ½å„ªåŒ–èˆ‡æ·»åŠ è‡ªè¨‚æ—¥æœŸå¿«é€Ÿè¨­å®š",
    features: [
    ],
    bugfixes: [
      "ä¿®å¾©æ—©ä¸Š8é»å‰è¨˜å¸³æ—¥æœŸé¡¯ç¤ºç‚ºå‰ä¸€å¤©çš„å•é¡Œ"
    ],
    improvements: [
      "å‰µå»ºçµ±ä¸€çš„æ—¥æœŸæ ¼å¼åŒ–å‡½æ•¸ formatDateToString",
      "æ–°å¢è‡ªè¨‚æ™‚é–“ç¯„åœå¿«é€Ÿè¨­å®šæŒ‰éµï¼Œæ·»åŠ ã€Œä»Šæ—¥ã€ã€ã€Œæœ¬é€±ã€ã€ã€Œè¿‘ä¸ƒæ—¥ã€ã€ã€Œæœ¬æœˆã€ã€ã€Œä¸Šæœˆã€ã€ã€Œä»Šå¹´ã€å¿«é€Ÿé¸æ“‡"
    ]
  },
  "2.0.7.2": {
    date: "2024-07-12",
    title: "icon æ›´æ–°",
    features: [
    ],
    bugfixes: [
    ],
    improvements: [
      "è£½ä½œæ–°çš„ iconï¼Œå®Œå…¨é‡æ–°ç¹ªè£½"
    ]
  },
  "2.0.7.1": {
    date: "2024-07-12",
    title: "ç€è¦½å™¨æ­·å²è¨˜éŒ„ç®¡ç†èˆ‡è¨­å®šä»‹é¢ä¿®å¾©",
    features: [
      "æ–°å¢ç€è¦½å™¨æ­·å²è¨˜éŒ„ç®¡ç†åŠŸèƒ½ï¼Œæ”¯æ´æ‰‹æ©Ÿè¿”å›éµåœ¨æ‡‰ç”¨å…§å°èˆªï¼Œä¸å†ç›´æ¥é€€å‡ºç¨‹å¼",
      "URL åŒæ­¥é¡¯ç¤ºç•¶å‰é é¢ç‹€æ…‹ï¼ˆ#home, #add, #records, #statsï¼‰",
      "æ”¯æ´ç€è¦½å™¨å‰é€²/å¾Œé€€æŒ‰éˆ•æ“ä½œ"
    ],
    bugfixes: [
      "ä¿®å¾©è¨­å®šä»‹é¢ç„¡æ³•æ‰“é–‹çš„å•é¡Œ",
      "ä¿®å¾©é é¢åˆ‡æ›æ™‚äº‹ä»¶ç›£è½å™¨å¤±æ•ˆçš„å•é¡Œ",
      "è§£æ±º PWA ä¸­è¿”å›éµç›´æ¥é€€å‡ºæ‡‰ç”¨çš„å•é¡Œ",
      "ä¿®å¾©å¾ªç’°è¨­å®šç‰ˆæœ¬è³‡è¨Šçš„ bug"
    ],
    improvements: [
      "ä½¿ç”¨äº‹ä»¶å§”è¨—å„ªåŒ–è¨­å®šæŒ‰éˆ•çš„äº‹ä»¶è™•ç†",
      "æ”¹å–„ PWA çš„ä½¿ç”¨é«”é©—å’Œå°èˆªæµæš¢åº¦"
    ]
  },
  "2.0.7": {
    date: "2024-07-12",
    title: "ä½¿ç”¨é«”é©—å„ªåŒ–èˆ‡æ–°å¢æ›´æ–°æ—¥èªŒ",
    features: [
      "æ–°å¢å®Œæ•´çš„ç‰ˆæœ¬æ›´æ–°æ—¥èªŒç³»çµ±"
    ],
    bugfixes: [
      "ä¿®å¾©æ˜ç´°é é¢ç·¨è¼¯æ™‚ä¸æœƒé è¨­é¸æ“‡åŸåˆ†é¡çš„å•é¡Œ",
      "ä¿®å¾©é¦–é  slider æ»‘å‹•è¡çªï¼Œç¾åœ¨å¯ä»¥æ­£å¸¸å‚ç›´æ»¾å‹•é é¢"
    ],
    improvements: [
    ]
  },
  "2.0.6.3": {
    date: "2024-07-07",
    title: "æ—¥æœŸç¯©é¸ä¿®å¾©èˆ‡è¨˜å¸³é é¢å„ªåŒ–",
    bugfixes: [
      "ä¿®å¾©æ—¥æœŸç¯©é¸éŒ¯èª¤é¡¯ç¤ºä¸Šå€‹æœˆæœˆåº•è¨˜éŒ„çš„å•é¡Œ",
      "ä¿®æ­£æ™‚é–“ç¯„åœè¨ˆç®—çš„æ™‚å€è½‰æ›å•é¡Œ"
    ],
    improvements: [
      "èª¿æ•´è¨˜å¸³é é¢ CSS æ¨£å¼",
      "å„ªåŒ–è¼¸å…¥å€åŸŸå¸ƒå±€å’Œé–“è·",
      "æ”¹å–„æ•´é«”è¦–è¦ºæ•ˆæœ"
    ]
  },
  "2.0.6.2": {
    date: "2024-07-06",
    title: "è¨˜å¸³å°éµç›¤ä»‹é¢èª¿æ•´",
    improvements: [
      "å¾®èª¿è¨˜å¸³é é¢å°éµç›¤ CSS æ¨£å¼",
      "å„ªåŒ–æŒ‰éˆ•å¤§å°å’Œé–“è·",
      "æ”¹å–„è§¸æ§é«”é©—"
    ]
  },
  "2.0.6.1": {
    date: "2024-07-06",
    title: "èƒŒæ™¯æ¨£å¼å„ªåŒ–",
    improvements: [
      "èª¿æ•´æ‡‰ç”¨ç¨‹å¼èƒŒæ™¯ CSS",
      "æ”¹å–„æ•´é«”è¦–è¦ºé…è‰²æ–¹æ¡ˆ",
      "å„ªåŒ–ä½¿ç”¨è€…ä»‹é¢ç¾è§€åº¦"
    ]
  },
  "2.0.6": {
    date: "2024-07-06",
    title: "åˆ†é¡ç®¡ç†ç³»çµ±å¢å¼·",
    features: [
      "æ·»åŠ è‡ªè¨‚åœ–ç¤ºåŠŸèƒ½ï¼Œæ”¯æ´æ›´å¤šå€‹æ€§åŒ–é¸æ“‡",
      "åˆ†é¡åå–®è¨­å®šé é¢æ·»åŠ æ»¾å‹•åŠŸèƒ½",
      "é¿å…é•·åˆ—è¡¨è¢«è£åˆ‡çš„å•é¡Œ"
    ],
    improvements: [
      "å„ªåŒ–åˆ†é¡é¸æ“‡ä»‹é¢",
      "æ”¹å–„åˆ†é¡ç®¡ç†çš„ä½¿ç”¨é«”é©—",
      "å¢å¼·åˆ†é¡è¨­å®šçš„éˆæ´»æ€§"
    ]
  },
  "2.0.5": {
    date: "2024-07-06",
    title: "è¨˜å¸³åŠŸèƒ½å®Œå–„",
    features: [
      "è¨˜å¸³é …ç›®æ”¯æ´å¾ŒçºŒç·¨è¼¯åˆ†é¡åŠŸèƒ½",
      "å¢å¼·è¨˜éŒ„ç®¡ç†çš„éˆæ´»æ€§"
    ],
    improvements: [
      "èª¿æ•´æ•¸å­—éµç›¤å¤§å°ï¼Œæå‡ä½¿ç”¨é«”é©—",
      "å„ªåŒ–è¨˜å¸³ä»‹é¢å¸ƒå±€",
      "æ”¹å–„è§¸æ§æ“ä½œæ„Ÿå—"
    ]
  },
  "2.0.4.2": {
    date: "2024-07-06",
    title: "è·¯å¾‘ä¿®å¾©",
    bugfixes: [
      "ä¿®å¾©éƒ¨åˆ†æª”æ¡ˆè·¯å¾‘éŒ¯èª¤",
      "è§£æ±ºè³‡æºè¼‰å…¥å•é¡Œ"
    ]
  },
  "2.0.4.1": {
    date: "2024-07-06",
    title: "ç‰ˆæœ¬è™Ÿé¡¯ç¤ºä¿®å¾©",
    bugfixes: [
      "ä¿®å¾©ç‰ˆæœ¬è™Ÿé¡¯ç¤ºéŒ¯èª¤çš„å•é¡Œ",
      "ç¢ºä¿ç‰ˆæœ¬è³‡è¨Šæ­£ç¢ºé¡¯ç¤º"
    ]
  },
  "2.0.4": {
    date: "2024-07-06",
    title: "å°éµç›¤æœ€å°åŒ–èˆ‡æ›´æ–°æª¢æŸ¥",
    features: [
      "è¨˜å¸³é é¢å°éµç›¤æ”¯æ´æœ€å°åŒ–åŠŸèƒ½",
      "æ·»åŠ æª¢æŸ¥æ›´æ–°æŒ‰éˆ•",
      "æ”¯æ´æ‰‹å‹•æª¢æŸ¥æ‡‰ç”¨ç¨‹å¼æ›´æ–°"
    ],
    improvements: [
      "å„ªåŒ–è¨˜å¸³é é¢ç©ºé–“åˆ©ç”¨",
      "æ”¹å–„å°è¢å¹•ä½¿ç”¨é«”é©—",
      "å¢å¼·æ‡‰ç”¨ç¨‹å¼æ›´æ–°æ©Ÿåˆ¶"
    ]
  },
  "2.0.3": {
    date: "2024-07-06",
    title: "Service Worker ç‰ˆæœ¬ç®¡ç†",
    features: [
      "èª¿æ•´ Service Worker æ”¯æ´ç‰ˆæœ¬è™Ÿåµæ¸¬",
      "å¯¦ç¾å¼·åˆ¶æ›´æ–°æ©Ÿåˆ¶",
      "æ·»åŠ ç‰ˆæœ¬æ›´æ–°é€šçŸ¥åŠŸèƒ½"
    ],
    improvements: [
      "å„ªåŒ–æ‡‰ç”¨ç¨‹å¼æ›´æ–°æµç¨‹",
      "æ”¹å–„å¿«å–ç®¡ç†ç­–ç•¥",
      "å¢å¼·é›¢ç·šåŠŸèƒ½ç©©å®šæ€§"
    ]
  },
  "2.0.2": {
    date: "2024-07-06",
    title: "é¦–é æ»‘å‹•é«”é©—å„ªåŒ–",
    features: [
      "é¦–é  Slider æ”¯æ´å³æ™‚æ»‘å‹•è·Ÿéš¨",
      "æ·»åŠ æ»‘å‹•æ‰‹å‹¢æ”¯æ´",
      "å¯¦ç¾æµæš¢çš„é é¢åˆ‡æ›æ•ˆæœ"
    ],
    improvements: [
      "å„ªåŒ–è§¸æ§æ“ä½œé«”é©—",
      "æ”¹å–„é é¢åˆ‡æ›å‹•ç•«",
      "å¢å¼·ä½¿ç”¨è€…äº’å‹•æ„Ÿå—"
    ]
  },
  "2.0.1": {
    date: "2024-07-06",
    title: "è³‡æ–™ç®¡ç†åŠŸèƒ½",
    features: [
      "æ·»åŠ è³‡æ–™ä¸Šå‚³é é¢",
      "æ”¯æ´è³‡æ–™åŒ¯å…¥åŒ¯å‡ºåŠŸèƒ½",
      "å¯¦ç¾è³‡æ–™å‚™ä»½èˆ‡é‚„åŸ"
    ],
    improvements: [
      "å„ªåŒ–è³‡æ–™è™•ç†æµç¨‹",
      "æ”¹å–„æª”æ¡ˆæ“ä½œä»‹é¢",
      "å¢å¼·è³‡æ–™å®‰å…¨æ€§"
    ]
  },
  "2.0.0": {
    date: "2024-07-02",
    title: "å…¨æ–°ç‰ˆæœ¬ç™¼å¸ƒ",
    features: [
      "å…¨æ–°çš„ç¾ä»£åŒ–ä»‹é¢è¨­è¨ˆ",
      "éŸ¿æ‡‰å¼å¸ƒå±€æ”¯æ´å„ç¨®è¢å¹•å°ºå¯¸",
      "åº•éƒ¨å°èˆªç³»çµ±",
      "é¦–é çµ±è¨ˆå„€è¡¨æ¿",
      "è¨˜å¸³æ˜ç´°åˆ—è¡¨é é¢",
      "çµ±è¨ˆåˆ†æåŠŸèƒ½"
    ],
    improvements: [
      "ä½¿ç”¨ Tailwind CSS é‡æ–°è¨­è¨ˆ",
      "æ¡ç”¨ ES6 æ¨¡çµ„åŒ–é–‹ç™¼",
      "å„ªåŒ–è¼‰å…¥é€Ÿåº¦å’Œä½¿ç”¨é«”é©—"
    ]
  },
  "1.x": {
    date: "2024-06-30",
    title: "èˆŠç‰ˆæœ¬åŠŸèƒ½",
    features: [
      "åŸºç¤è¨˜å¸³åŠŸèƒ½",
      "ç°¡å–®çš„è³‡æ–™å„²å­˜",
      "åŸºæœ¬çš„çµ±è¨ˆé¡¯ç¤º"
    ],
    note: "èˆŠç‰ˆæœ¬å·²åœæ­¢ç¶­è­·ï¼Œå»ºè­°å‡ç´šåˆ° 2.0 ç‰ˆæœ¬"
  }
}

export class ChangelogManager {
  constructor() {
    // å¾ç€è¦½å™¨å­˜å„²ä¸­è®€å–ç•¶å‰ç‰ˆæœ¬ï¼Œå¦‚æœæ²’æœ‰å‰‡ä½¿ç”¨é è¨­å€¼
    this.currentVersion = localStorage.getItem('app-current-version') || '2.0.7.4'
  }

  // ç²å–ç•¶å‰ç‰ˆæœ¬è³‡è¨Š
  getCurrentVersionInfo() {
    return {
      version: this.currentVersion,
      ...CHANGELOG[this.currentVersion]
    }
  }

  // ç²å–æ‰€æœ‰ç‰ˆæœ¬æ­·å²
  getAllVersions() {
    return Object.keys(CHANGELOG).map(version => ({
      version,
      ...CHANGELOG[version]
    })).sort((a, b) => new Date(b.date) - new Date(a.date))
  }

  // ç²å–æŒ‡å®šç‰ˆæœ¬è³‡è¨Š
  getVersionInfo(version) {
    return CHANGELOG[version] ? {
      version,
      ...CHANGELOG[version]
    } : null
  }

  // æ¸²æŸ“ç‰ˆæœ¬è³‡è¨Š HTML
  renderVersionInfo(versionInfo, isCurrentVersion = false) {
    const { version, date, title, features = [], bugfixes = [], improvements = [], note } = versionInfo
    
    return `
      <div class="mb-6 p-4 border rounded-lg ${isCurrentVersion ? 'border-wabi-accent/50 bg-wabi-accent/10' : 'border-wabi-border bg-wabi-surface'}">
        <div class="flex items-center justify-between mb-3">
          <div class="flex items-center space-x-2">
            <h3 class="text-lg font-bold text-wabi-primary">v${version}</h3>
            ${isCurrentVersion ? '<span class="px-2 py-1 text-xs bg-wabi-accent text-wabi-primary rounded-full">ç›®å‰ç‰ˆæœ¬</span>' : ''}
          </div>
          <span class="text-sm text-wabi-text-secondary">${date}</span>
        </div>
        
        <h4 class="text-md font-semibold text-wabi-text-primary mb-3">${title}</h4>
        
        ${note ? `<div class="mb-3 p-2 bg-yellow-100/50 border border-yellow-300/30 rounded text-sm text-yellow-800">${note}</div>` : ''}
        
        ${features.length > 0 ? `
          <div class="mb-3">
            <h5 class="text-sm font-semibold text-wabi-income mb-2">âœ¨ æ–°åŠŸèƒ½</h5>
            <ul class="text-sm text-wabi-text-secondary space-y-1">
              ${features.map(feature => `<li class="flex items-start"><span class="text-wabi-income mr-2">â€¢</span>${feature}</li>`).join('')}
            </ul>
          </div>
        ` : ''}
        
        ${bugfixes.length > 0 ? `
          <div class="mb-3">
            <h5 class="text-sm font-semibold text-wabi-expense mb-2">ğŸ› éŒ¯èª¤ä¿®å¾©</h5>
            <ul class="text-sm text-wabi-text-secondary space-y-1">
              ${bugfixes.map(fix => `<li class="flex items-start"><span class="text-wabi-expense mr-2">â€¢</span>${fix}</li>`).join('')}
            </ul>
          </div>
        ` : ''}
        
        ${improvements.length > 0 ? `
          <div class="mb-3">
            <h5 class="text-sm font-semibold text-wabi-primary mb-2">ğŸ”§ æ”¹é€²å„ªåŒ–</h5>
            <ul class="text-sm text-wabi-text-secondary space-y-1">
              ${improvements.map(improvement => `<li class="flex items-start"><span class="text-wabi-primary mr-2">â€¢</span>${improvement}</li>`).join('')}
            </ul>
          </div>
        ` : ''}
      </div>
    `
  }

  // æ¸²æŸ“ç•¶å‰ç‰ˆæœ¬æ›´æ–°æ‘˜è¦ï¼ˆç”¨æ–¼è¨­å®šé é¢ï¼‰
  renderCurrentVersionSummary() {
    const currentInfo = this.getCurrentVersionInfo()
    const { features = [], bugfixes = [], improvements = [] } = currentInfo
    
    return `
      <!-- ç‰ˆæœ¬æ¨™é¡Œ -->
      <div class="mb-3">
        <h4 class="font-semibold text-gray-800 text-base">${currentInfo.title}</h4>
      </div>
      
      <!-- æ›´æ–°å…§å®¹ -->
      <div class="space-y-2">
        ${features.length > 0 ? `
          <div>
            <h5 class="text-xs font-semibold text-green-600 mb-1">âœ¨ æ–°åŠŸèƒ½</h5>
            <ul class="text-xs text-gray-600 space-y-1 ml-2">
              ${features.slice(0, 3).map(feature => `<li class="flex items-start"><span class="text-green-500 mr-1">â€¢</span><span>${feature}</span></li>`).join('')}
              ${features.length > 3 ? `<li class="text-gray-400">...é‚„æœ‰ ${features.length - 3} é …åŠŸèƒ½</li>` : ''}
            </ul>
          </div>
        ` : ''}
        
        ${bugfixes.length > 0 ? `
          <div>
            <h5 class="text-xs font-semibold text-red-600 mb-1">ğŸ› éŒ¯èª¤ä¿®å¾©</h5>
            <ul class="text-xs text-gray-600 space-y-1 ml-2">
              ${bugfixes.slice(0, 3).map(fix => `<li class="flex items-start"><span class="text-red-500 mr-1">â€¢</span><span>${fix}</span></li>`).join('')}
              ${bugfixes.length > 3 ? `<li class="text-gray-400">...é‚„æœ‰ ${bugfixes.length - 3} é …ä¿®å¾©</li>` : ''}
            </ul>
          </div>
        ` : ''}
        
        ${improvements.length > 0 ? `
          <div>
            <h5 class="text-xs font-semibold text-blue-600 mb-1">ğŸ”§ æ”¹é€²å„ªåŒ–</h5>
            <ul class="text-xs text-gray-600 space-y-1 ml-2">
              ${improvements.slice(0, 3).map(improvement => `<li class="flex items-start"><span class="text-blue-500 mr-1">â€¢</span><span>${improvement}</span></li>`).join('')}
              ${improvements.length > 3 ? `<li class="text-gray-400">...é‚„æœ‰ ${improvements.length - 3} é …å„ªåŒ–</li>` : ''}
            </ul>
          </div>
        ` : ''}
      </div>
    `
  }

  // é¡¯ç¤ºå®Œæ•´æ›´æ–°æ—¥èªŒ Modal
  showChangelogModal() {
    // ç§»é™¤ç¾æœ‰çš„ modal
    const existingModal = document.getElementById('changelog-modal')
    if (existingModal) {
      existingModal.remove()
    }

    const modal = document.createElement('div')
    modal.id = 'changelog-modal'
    modal.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4'
    
    const allVersions = this.getAllVersions()
    
    modal.innerHTML = `
      <div class="bg-wabi-bg rounded-lg max-w-2xl w-full max-h-[80vh] flex flex-col">
        <div class="flex items-center justify-between p-4 border-b border-wabi-border">
          <h3 class="text-xl font-semibold text-wabi-primary">ç‰ˆæœ¬æ›´æ–°æ—¥èªŒ</h3>
          <button id="close-changelog-btn" class="text-wabi-text-secondary hover:text-wabi-primary">
            <i class="fas fa-times text-xl"></i>
          </button>
        </div>
        
        <div class="flex-1 overflow-y-auto p-4">
          ${allVersions.map((version, index) => 
            this.renderVersionInfo(version, index === 0)
          ).join('')}
        </div>
        
        <div class="p-4 border-t border-wabi-border text-center">
          <p class="text-sm text-wabi-text-secondary">æ„Ÿè¬æ‚¨ä½¿ç”¨è¼•é¬†è¨˜å¸³ï¼</p>
        </div>
      </div>
    `
    
    document.body.appendChild(modal)
    
    // äº‹ä»¶ç›£è½
    document.getElementById('close-changelog-btn').addEventListener('click', () => {
      modal.remove()
    })
    
    // é»æ“ŠèƒŒæ™¯é—œé–‰
    modal.addEventListener('click', (e) => {
      if (e.target === modal) {
        modal.remove()
      }
    })
  }
}
